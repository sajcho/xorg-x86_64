# Description:	Mesa DRI OpenGL library
# URL:		http://www.mesa3d.org
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	egl-wayland elfutils libva libvdpau libxdamage libxshmfence libxxf86vm llvm-toolchain python3-mako

name=mesa
version=23.1.0
release=1
source=(https://mesa.freedesktop.org/archive/${name}-${version}.tar.xz)

build() {
	cd ${name}-${version}

	build-meson \
		-Dplatforms=x11,wayland \
		-Degl-native-platform=auto \
		-Dgallium-drivers=auto \
		-Dvulkan-drivers= \
		-Dlibunwind=disabled \
		-Dvalgrind=disabled \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build
}
